def resetCount[T](events: Events[T], reset: Events[Unit]) := {
  def s: Events[Int] :=
    if time(events) == default(time(reset),0) then
      1
    else if time(events) > default(time(reset),0) then
      last(sum, events) + 1
    else
      0
  def sum := default(s, 0)
  sum
}

in x: Events[Unit]
in y: Events[Unit]
def z := resetCount(x,y)
out z
