in load: Events[Int]

def queue := TimeQueue_removeOlder(
  TimeQueue_enqueue(
    default(last(queue, load), TimeQueue_empty),
    time(load),
    load),
  time(load) - 5)
def s := max(time(load) - 5, time(firstEvent(load)))
def avg := if (time(load) - s) > 0 then TimeQueue_weightedSum(queue, time(load)) / (time(load) - s) else 0

out avg

# stdlib
def max(a,b) := if a > b then a else b
def firstEvent(a) := default(nil, a)
