def eventCount(e) := {
    def ec := default(last(ec, e) + 1, 0)
    ec
}

in x: Events[Int]
in y: Events[Int]
in e: Events[Unit]
in c: Events[Bool]

def z := x + y
out z

def ec := eventCount(e)
out ec

def ecOrZ := if c then z else ec
out ecOrZ
