--
-- Macros
--
define onIf(trig, cond) := filter(trig, cond: Signal<Boolean>)
define geq(x,y) := not(lt(x,y))
define lt(x,y) := gt(y,x)


--
-- Inputs
--
define writeElement: Events<Unit> := instruction_executions("main.c:49")
define processElement: Events<Unit> := function_calls("main.c:process_data")

--
-- Spec
--
define diffProcWrite := sub(eventCount(processElement), eventCount(writeElement))
--define error := on processElement if geq(diffProcWrite,1)
define doubleProcessing := onIf(processElement, geq(diffProcWrite,constantSignal(1)))

define diffWriteProc := sub(eventCount(writeElement), eventCount(processElement))
define bufferOverflow := onIf(writeElement, geq(diffWriteProc,constantSignal(6)))
